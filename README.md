# IDZ2 ‚Äì Text Scanner Microservice System üß†üóÇÔ∏è

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –≤—ã—è–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–∞–∫–∞ —Å–ª–æ–≤.

## üß© –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤** –∏ –≤–∫–ª—é—á–∞–µ—Ç:

- üì¶ **FileStoringService** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–¥–∞—á–∞;
- üìä **FileAnalisysService** ‚Äî –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞, –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö–µ—à–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–∞–∫–∞ —Å–ª–æ–≤;
- üåê **APIGateway** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–æ –≤—Å–µ–º —Å–µ—Ä–≤–∏—Å–∞–º;
- üß™ **Test** ‚Äî —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (–Ω–∞ `xUnit`, –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Moq).

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- .NET 7  
- ASP.NET Core Web API  
- Docker, Docker Compose  
- PostgreSQL  
- Entity Framework Core  
- HTTP-–∫–ª–∏–µ–Ω—Ç—ã (`HttpClientFactory`)  
- QuickChart API ‚Äî –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–±–ª–∞–∫–∞ —Å–ª–æ–≤  
- xUnit ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker –∏ .NET 7.

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**  
   ```bash
   git clone https://github.com/lazarevaak/IDZ2.git
   cd IDZ2
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –≤ Docker**  
   ```bash
   docker-compose up --build
   ```

3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ Swagger UI:

   - üìÅ [FileStoringService](http://localhost:6010/swagger/index.html)
   - üìä [FileAnalisysService](http://localhost:6011/swagger/index.html)
   - üåê [APIGateway (–µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)](http://localhost:6015/swagger/index.html)

## üìå –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

–ß–µ—Ä–µ–∑ `/files/upload` –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å `.txt`-—Ñ–∞–π–ª. –í –æ—Ç–≤–µ—Ç–µ –≤–µ—Ä–Ω—ë—Ç—Å—è `id`.

### üîé –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞

- `POST /scan/{id}` ‚Äî –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ `id` —Ñ–∞–π–ª–∞:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–±–∑–∞—Ü–µ–≤, —Å–ª–æ–≤, —Å–∏–º–≤–æ–ª–æ–≤
  - –•–µ—à SHA256
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ —Ö–µ—à—É

### ‚òÅÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–∞–∫–∞ —Å–ª–æ–≤

- `GET /scan/{id}/cloud` ‚Äî PNG-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç `Test/` —Å–æ–¥–µ—Ä–∂–∏—Ç —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è `FilesController` –∏ `AnalysisController`.

```bash
cd Test
dotnet test
```

–¢–µ—Å—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Moq, —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ `InMemoryDatabase`.

## üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
IDZ2/
‚îú‚îÄ‚îÄ FileStoringService/
‚îú‚îÄ‚îÄ FileAnalisysService/
‚îú‚îÄ‚îÄ APIGateway/
‚îú‚îÄ‚îÄ Test/
‚îî‚îÄ‚îÄ docker-compose.yml
```
